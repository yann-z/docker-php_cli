version: '3'

services:

### PHP-CLI Container #######################################

    php-7.1-cli:
      container_name: "php-${TAG_PHP_7_1_CLI}"
      image: "yann/php:${TAG_PHP_7_1_CLI}"
      build:
        context: ./build
        dockerfile: docker_file_php_7_1_cli
        args:
          - image_tag=${TAG_PHP_7_1_CLI}
      volumes:
        - ${PATH_PROJECT_ROOT}/conf/php.ini:/usr/local/etc/php/php.ini
        - ${PATH_PROJECT_ROOT}/conf/php_xdbug.ini:/usr/local/etc/php/conf.d/docker-php-ext-xdbug.ini
        - ${PATH_WEB_DATA}/php_log:/usr/local/var/log
        - ${PATH_WEB_TEST}:/var/www/test
      working_dir: /var/www/test
      networks:
        - php-cli
      ports:
        - "8000:8000"
      environment:
        TZ: "Asia/Shanghai"
        HOSTNAME: xdebug_ide
      extra_hosts:
        xdebug_ide: ${XDEBUG_IDE_IP}

### Networks Setup ##########################################

networks:
    php-cli:
